#!/bin/bash
# .env.local - 本地开发环境变量配置
# 使用方法: source .env.local

# ==================== 基础服务配置 ====================
# 根据 docker-compose.yml 中的端口映射配置

# Etcd 配置
export ETCD_HOSTS=127.0.0.1:2379

# Jaeger 链路追踪
# docker-compose.yml: ports: - "14268:14268"
export JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Redis 配置
# docker-compose.yml: ports: - 36379:6379
# ⚠️ 注意：宿主机端口是 36379，不是 6379
export REDIS_HOST=localhost:36379
export REDIS_PASS=G62m50oigInC30sf

# MySQL 配置
# docker-compose.yml: ports: - 33069:3306
# ⚠️ 注意：宿主机端口是 33069，不是 3306
export MYSQL_DSN="root:PXDN93VRKUm8TeE7@tcp(localhost:33069)/looklook_usercenter?charset=utf8mb4&parseTime=true&loc=Asia%2FShanghai"

# Kafka 配置
# docker-compose.yml: ports: - 9094:9094 (外部访问端口)
# ⚠️ 注意：宿主机访问使用 9094，容器内部使用 9092
export KAFKA_BROKERS=localhost:9094

# Elasticsearch 配置（可选）
# docker-compose.yml: ports: - "9200:9200"
export ES_HOST=localhost:9200

# ==================== 提示信息 ====================
echo "✅ 本地开发环境变量已加载"
echo ""
echo "📋 服务端口映射："
echo "  MySQL:         容器 3306  → 宿主机 33069"
echo "  Redis:         容器 6379  → 宿主机 36379"
echo "  Kafka:         容器 9092  → 宿主机 9094"
echo "  Jaeger:        容器 14268 → 宿主机 14268"
echo "  Elasticsearch: 容器 9200  → 宿主机 9200"
echo ""
echo "🔧 当前环境变量："
echo "  ETCD_HOSTS:       ${ETCD_HOSTS}"
echo "  JAEGER_ENDPOINT:  ${JAEGER_ENDPOINT}"
echo "  REDIS_HOST:       ${REDIS_HOST}"
echo "  KAFKA_BROKERS:    ${KAFKA_BROKERS}"

